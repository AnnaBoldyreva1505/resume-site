---
const { current = 'ru', t = { menu: {} } } = Astro.props;
---

<header>
  <nav class="side-menu hidden lg:flex flex-col p-6 fixed top-0 bottom-0 w-[250px] bg-[#231720] text-white z-50">
    
    <!-- Фото -->
    <ul class="menu-list space-y-4 text-left uppercase tracking-wide text-sm">
      <li class="flex justify-center">
        <img
          src="/img/photo.jpg"
          alt="Anna Boldyreva"
          class="border-4 border-pink-400 rounded-full w-40 h-40 object-cover"
        />
      </li>

      <!-- Навигация -->
      {[ 
        { href: '#home', id: 'home', label: t.menu?.home || 'Home' },
        { href: '#about', id: 'about', label: t.menu?.about || 'About' },
        { href: '#skills', id: 'skills', label: t.menu?.skills || 'Skills' },
        { href: '#code-example', id: 'code-example', label: t.menu?.codeExample || 'Code example' },
        { href: '#projects', id: 'projects', label: t.menu?.projects || 'Projects' },
        { href: '#education', id: 'education', label: t.menu?.education || 'Education' },
        { href: '#languages', id: 'languages', label: t.menu?.languages || 'Languages' }
      ].map((link) => (
        <li class="relative pl-6 group">
          <span
            class="heart absolute left-0 top-1/2 transform -translate-y-1/2 opacity-0 group-hover:opacity-100 transition-opacity duration-300 text-pink-400"
          >
            ♥
          </span>
          <a
            href={link.href}
            class="menu-link block text-white hover:text-pink-400 group-hover:font-bold transition-all duration-300"
            data-id={link.id}
          >
            {link.label}
          </a>
        </li>
      ))}
    </ul>

   <div class="mt-auto pt-6">
  <ul class="flex justify-around items-center space-x-4 text-pink-400">
    <li>
      <a href="mailto:hannabl1988@gmail.com" class="hover:text-white transition-colors duration-300">
        <svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" class="w-6 h-6" viewBox="0 0 24 24">
          <path d="M2 4h20v16H2z" fill="none" />
          <path d="M22 4H2v16h20V4zm-2 2v.511l-8 5.334-8-5.334V6h16zm0 12H4V8.046l8 5.334 8-5.334V18z" />
        </svg>
      </a>
    </li>

    <li>
      <a href="tel:+77072117120" class="hover:text-white transition-colors duration-300">
        <svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" class="w-6 h-6" viewBox="0 0 24 24">
          <path d="M6.62 10.79a15.464 15.464 0 006.59 6.59l2.2-2.2a1 1 0 011.11-.27 11.36 11.36 0 003.55.57 1 1 0 011 1v3.44a1 1 0 01-1 1A16 16 0 013 5a1 1 0 011-1h3.44a1 1 0 011 1 11.36 11.36 0 00.57 3.55 1 1 0 01-.27 1.11z" />
        </svg>
      </a>
    </li>

    <li>
      <a href="http://telegram.org" class="hover:text-white transition-colors duration-300">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 240 240" width="24" height="24" fill="currentColor">
  <path d="M120,0C53.73,0,0,53.73,0,120s53.73,120,120,120,120-53.73,120-120S186.27,0,120,0Zm54.15,81.54-20,94.39c-1.51,6.77-5.53,8.45-11.2,5.26l-30.9-22.8-14.9,14.34c-1.64,1.64-3,3-6.16,3l2.2-31.16L153,93.64c2.45-2.2-.53-3.42-3.8-1.22L87.7,137.59l-29.9-9.35c-6.51-2-6.64-6.51,1.36-9.63l116.14-44.74c5.33-1.94,10,1.3,8.85,7.67Z"/>
</svg>
      </a>
    </li>

    <li>
      <a href="https://www.linkedin.com/9" class="hover:text-white transition-colors duration-300">
        <svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" class="w-6 h-6" viewBox="0 0 24 24">
          <path d="M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.85-3.037-1.851 0-2.134 1.445-2.134 2.939v5.667H9.354V9h3.415v1.561h.049c.476-.897 1.637-1.847 3.367-1.847 3.599 0 4.264 2.368 4.264 5.451v6.287zM5.337 7.433c-1.144 0-2.07-.928-2.07-2.07s.926-2.07 2.07-2.07c1.143 0 2.07.928 2.07 2.07s-.927 2.07-2.07 2.07zm1.777 13.019H3.56V9h3.554v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.727v20.545C0 23.227.792 24 1.771 24h20.451C23.206 24 24 23.227 24 22.273V1.727C24 .774 23.206 0 22.225 0z"/>
        </svg>
      </a>
    </li>

    <li>
      <a href="https://github.com/9" class="hover:text-white transition-colors duration-300">
        <svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" class="w-6 h-6" viewBox="0 0 24 24">
          <path d="M12 0C5.372 0 0 5.373 0 12a12 12 0 008.205 11.43c.6.11.82-.26.82-.58 0-.29-.01-1.05-.015-2.07-3.338.73-4.042-1.61-4.042-1.61-.546-1.38-1.333-1.75-1.333-1.75-1.09-.75.083-.735.083-.735 1.205.084 1.84 1.235 1.84 1.235 1.07 1.83 2.81 1.3 3.49.995.107-.775.418-1.3.76-1.6-2.665-.3-5.466-1.35-5.466-6a4.7 4.7 0 011.25-3.25c-.125-.3-.545-1.5.125-3.12 0 0 1.01-.33 3.3 1.25a11.4 11.4 0 016 0C17.985 4.45 19 4.78 19 4.78c.67 1.62.25 2.82.125 3.12a4.7 4.7 0 011.25 3.25c0 4.67-2.8 5.7-5.475 6 .43.38.81 1.1.81 2.22 0 1.6-.015 2.89-.015 3.28 0 .32.22.7.825.58A12 12 0 0024 12c0-6.627-5.373-12-12-12z"/>
        </svg>
      </a>
    </li>
  </ul>
</div>

  </nav>
</header>

<!-- Скрипт -->
<script is:inline>
  document.addEventListener('DOMContentLoaded', () => {
    const links = document.querySelectorAll('.menu-link');
    const hearts = document.querySelectorAll('.heart');

    function clearActiveStates() {
      links.forEach((link) => {
        link.classList.remove('text-pink-400', 'font-bold');
      });
      hearts.forEach((heart) => {
        heart.classList.remove('opacity-100');
      });
    }

    function updateActiveLink() {
      const scrollPos = window.scrollY || document.documentElement.scrollTop;

      links.forEach((link, index) => {
        const id = link.getAttribute('data-id');
        const section = document.getElementById(id);
        if (!section) return;

        const offsetTop = section.offsetTop;
        const offsetBottom = offsetTop + section.offsetHeight;

        if (scrollPos >= offsetTop - 100 && scrollPos < offsetBottom - 100) {
          clearActiveStates();
          link.classList.add('text-pink-400', 'font-bold');
          hearts[index].classList.add('opacity-100');
        }
      });
    }

    // Подсветка при скролле
    window.addEventListener('scroll', updateActiveLink);

    // Подсветка при клике
    links.forEach((link, index) => {
      link.addEventListener('click', () => {
        clearActiveStates();
        link.classList.add('text-pink-400', 'font-bold');
        hearts[index].classList.add('opacity-100');
      });
    });

    // Первичная установка
    updateActiveLink();
  });
</script>
