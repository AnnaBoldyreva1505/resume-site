---
const { current = 'en' } = Astro.props;

const flags = {
  en: '/img/en.png',
  ru: '/img/ru.png',
  kz: '/img/kz.png',
};

const languages = ['en', 'ru', 'kz'];
---

<style>
  @keyframes dropdownFadeIn {
    from {
      opacity: 0;
      transform: translateY(-4px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  .dropdown-enter {
    animation: dropdownFadeIn 0.2s ease-out forwards;
  }
</style>

<div class="relative inline-block">
  <button
    class="w-10 h-7 hover:shadow overflow-hidden"
    onclick="
      const dd = document.getElementById('langDropdown');
      dd.classList.toggle('hidden');
      if (!dd.classList.contains('hidden')) {
        dd.classList.add('dropdown-enter');
      } else {
        dd.classList.remove('dropdown-enter');
      }
    "
  >
    <img
      src={flags[current]}
      alt={current}
      class="w-full h-full object-cover"
    />
  </button>

  <div
    id="langDropdown"
    class="absolute mt-1 w-10 bg-white shadow hidden z-10"
  >
    {languages
  .filter((l) => l !== current)
  .map((lang) => (
    <a
      href={`/${lang}`}
      class="block w-10 h-7 hover:bg-gray-100 mb-1 last:mb-0"
      title={lang}
    >
      <img
        src={flags[lang]}
        alt={lang}
        class="w-full h-full object-cover"
      />
    </a>
  ))}

</div>
